<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册页面</title>
</head>
<body>
    <p id="errmsg" style="color:red"></p>
    <form id="RegisterForm">
        <div>
            <label>用户名:</label>
            <input id="name" type="text" name="name">
        </div>
        <div>
            <label>中文名:</label>
            <input id="name_cn" type="text" name="name_cn">
        </div>
        <div>
            <label>手机号:</label>
            <input id="mobile" type="text" name="mobile">
        </div>
        <div>
            <label>邮箱号:</label>
            <input id="email" type="text" name="email">
        </div>
        <div>
            <label>角色:</label>
            <select id="role" name="role">
                <option value="admin">管理员</option>
                <option value="common">普通用户</option>
            </select>
        </div>
        <div>
            <label>状态:</label>
            <select id="status" name="status">
                <option value="0">正常</option>
                <option value="1">锁定</option>
            </select>
        </div>
        <div>
            <label>密码:</label>
            <input id="password" type="password" name="password">
        </div>
        <div>
            <label>重复密码:</label>
            <input id="repwd" type="password" name="repwd">
        </div>
        <div>
            <input id="regbtn" type="submit">添加用户</input>
            <a href="/userlist">返回</a>
        </div>
    </form>
<script src="/static/js/jquery-3.1.0.min.js"></script>
<script>
    $('#regbtn').click(function(){
        var str = $('#RegisterForm').serialize()
        console.log(str)
        $.post('/register',str,function(data) {
            console.log(data)
            data = JSON.parse(data)
            console.log(data)
            if (data['code']==0){
                alert(data['result'])
                location.href="/login"
            }else{
                $('#errmsg').html(data['errmsg'])
            }
        })
        return false
    })
</script>
</body>
</html>